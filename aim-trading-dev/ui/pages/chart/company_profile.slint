import { ListView, ScrollView } from "std-widgets.slint";
import { TextButton } from "../../widgets/aim_widget.slint";
import { SharedHolder, Officer, Subsidiary, InsiderTransaction, FinanceName, FinanceValue, FinanceList, HeaderData } from "finance_type.slint";
import { Utils, StockData } from "../../data_type.slint";
import { StockHeader } from "finance.slint";

export component StockInfo inherits Rectangle {
    in property <string> name: "gi√° s√†n";
    in property <float> value: 0.0;
    in property <color> font-color: #FFFFFF;

    HorizontalLayout {
        spacing: 2px;
        Text {
            text: name;
            color: #999999;
            font-size: 12px;
            vertical-alignment: center;
            horizontal-alignment: left;
        }
        Text {
            text: value.to-fixed(2);
            color: font-color;
            font-size: 13px;
            vertical-alignment: center;
            horizontal-alignment: right;
        }
    }
}

export component OfficersList inherits Rectangle {
    in property <[Officer]> officers;
    background: #181818;
    
    HorizontalLayout {
        padding: 20px;
        spacing: 20px;
        
        // Left side - Officers table
        VerticalLayout {
            spacing: 16px;
            width: 60%;
            
            // Header section
            Rectangle {
                height: 50px;
                background: #2a2a2a;
                border-radius: 10px;
                
                HorizontalLayout {
                    padding: 16px;
                    
                    VerticalLayout {
                        Text {
                            text: "BAN L√ÉNH ƒê·∫†O";
                            color: #FFFFFF;
                            font-size: 18px;
                            font-weight: 700;
                            horizontal-alignment: left;
                            vertical-alignment: center;
                        }
                    }
                    
                    Rectangle {} // Spacer
                    
                    Text {
                        text: @tr("{} th√†nh vi√™n", officers.length);
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 600;
                        horizontal-alignment: right;
                        vertical-alignment: center;
                    }
                }
            }
            
            // Officers list
            if officers.length > 0: ListView {
                for officer[index] in officers: Rectangle {
                    height: 50px;
                    background: Math.mod(index, 2) == 0 ? #2a2a2a : #252525;
                    border-radius: 8px;
                    
                    HorizontalLayout {
                        padding: 12px;
                        spacing: 8px;
                        
                        Text {
                            text: officer.name;
                            color: #FFFFFF;
                            font-size: 12px;
                            font-weight: 500;
                            horizontal-alignment: left;
                            vertical-alignment: center;
                            wrap: word-wrap;
                        }
                        
                        Text {
                            text: officer.position;
                            color: #E0E0E0;
                            font-size: 12px;
                            horizontal-alignment: right;
                            vertical-alignment: center;
                        }
                    }
                }
            }
            
            // Empty state
            if officers.length == 0: Rectangle {
                height: 200px;
                background: #2a2a2a;
                border-radius: 12px;
                
                VerticalLayout {
                    alignment: center;
                    spacing: 12px;
                    
                    Text {
                        text: "üë•";
                        color: #555555;
                        font-size: 32px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    Text {
                        text: "Kh√¥ng c√≥ d·ªØ li·ªáu ban l√£nh ƒë·∫°o";
                        color: #888888;
                        font-size: 16px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                }
            }
        }
        
        // Right side - Officer profile
        VerticalLayout {
            spacing: 16px;
            width: 40%;
            
            // Officer image and basic info
            Rectangle {
                height: 200px;
                background: #2a2a2a;
                border-radius: 12px;
                
                VerticalLayout {
                    padding: 16px;
                    spacing: 12px;
                    
                    // Profile photo section
                    Rectangle {
                        height: 80px;
                        width: 80px;
                        background: #404040;
                        border-radius: 40px;
                        
                        HorizontalLayout {
                            alignment: center;
                            Text {
                                text: "üë§";
                                color: #888888;
                                font-size: 32px;
                                horizontal-alignment: center;
                                vertical-alignment: center;
                            }
                        }
                    }
                    
                    Text {
                        text: officers.length > 0 ? officers[0].name : "Ch·ªçn th√†nh vi√™n";
                        color: #FFFFFF;
                        font-size: 16px;
                        font-weight: 700;
                        wrap: word-wrap;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    
                    Text {
                        text: officers.length > 0 ? officers[0].position : "Ch·ª©c v·ª•";
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 600;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                }
            }
            
            // Detailed information
            Rectangle {
                background: #2a2a2a;
                border-radius: 12px;
                
                VerticalLayout {
                    padding: 16px;
                    spacing: 12px;
                    
                    Text {
                        text: "QU√Å TR√åNH C√îNG T√ÅC";
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 700;
                        horizontal-alignment: left;
                    }
                    
                    VerticalLayout {
                        spacing: 8px;
                        
                        HorizontalLayout {
                            Text {
                                text: "T·ª´ 2006 - T1/2008:";
                                color: #E0E0E0;
                                font-size: 12px;
                                width: 40%;
                            }
                            Text {
                                text: "Ph√≥ tr∆∞·ªüng ban ƒë·∫ßu t∆∞ x√¢y d·ª±ng T·ªïng C√¥ng ty H√≥a ch·∫•t Vi·ªát Nam";
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                                width: 60%;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "T1/2008 - T7/2008:";
                                color: #E0E0E0;
                                font-size: 12px;
                                width: 40%;
                            }
                            Text {
                                text: "Ph·ª• tr√°ch ban ƒê·∫ßu t∆∞ x√¢y d·ª±ng T·ªïng C√¥ng ty H√≥a ch·∫•t Vi·ªát Nam";
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                                width: 60%;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "T·ª´ 8/2008:";
                                color: #E0E0E0;
                                font-size: 12px;
                                width: 40%;
                            }
                            Text {
                                text: "Tr∆∞·ªüng ban ƒë·∫ßu t∆∞ x√¢y d·ª±ng T·ªïng C√¥ng ty H√≥a ch·∫•t Vi·ªát Nam; Ch·ªß t·ªãch HƒêQT CTCP DAP s·ªë 2 - Vinachem";
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                                width: 60%;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "25/04/2018 - 25/06/2020:";
                                color: #E0E0E0;
                                font-size: 12px;
                                width: 40%;
                            }
                            Text {
                                text: "Ch·ªß t·ªãch HƒêQT CTCP Cao Su ƒê√† N·∫µng (M√£ CK: DRC)";
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                                width: 60%;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "T·ª´ 26/06/2020:";
                                color: #E0E0E0;
                                font-size: 12px;
                                width: 40%;
                            }
                            Text {
                                text: "Ch·ªß t·ªãch HƒêQT CTCP DAP - VINACHEM (M√£ CK: DDV)";
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                                width: 60%;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "27/04/2022 - 29/04/2024:";
                                color: #E0E0E0;
                                font-size: 12px;
                                width: 40%;
                            }
                            Text {
                                text: "Ch·ªß t·ªãch HƒêQT CTCP H√≥a ch·∫•t C∆° b·∫£n mi·ªÅn Nam (M√£ CK: CSV)";
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                                width: 60%;
                            }
                        }
                    }
                    
                    Text {
                        text: "B·∫∞NG C·∫§P, CH·ª®NG CH·ªà, KHEN TH∆Ø·ªûNG, K·ª∂ LU·∫¨T";
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 700;
                        horizontal-alignment: left;
                    }
                    
                    Text {
                        text: "Th·∫°c sƒ© x√¢y d·ª±ng v√† c√¥ng nghi·ªáp";
                        color: #E0E0E0;
                        font-size: 12px;
                        wrap: word-wrap;
                    }
                }
            }
        }
    }
}

export component InsiderTransactionsList inherits Rectangle {
    in property <[InsiderTransaction]> transactions;
    background: #181818;
    
    VerticalLayout {
        padding: 20px;
        spacing: 16px;
        
        // Header section
        Rectangle {
            height: 50px;
            background: #2a2a2a;
            border-radius: 10px;
            
            HorizontalLayout {
                padding: 16px;
                
                VerticalLayout {
                    Text {
                        text: "GIAO D·ªäCH N·ªòI B·ªò";
                        color: #FFFFFF;
                        font-size: 18px;
                        font-weight: 700;
                        horizontal-alignment: left;
                        vertical-alignment: center;
                    }
                }
                
                Rectangle {} // Spacer
                
                Text {
                    text: @tr("{} giao d·ªãch", transactions.length);
                    color: #00D4AA;
                    font-size: 14px;
                    font-weight: 600;
                    horizontal-alignment: right;
                    vertical-alignment: center;
                }
            }
        }
        
        // Table header
        if transactions.length > 0: Rectangle {
            height: 60px;
            background: #333333;
            border-radius: 8px;
            
            HorizontalLayout {
                padding: 12px;
                spacing: 8px;
                
                Text {
                    text: "T√äN";
                    color: #FFFFFF;
                    font-size: 12px;
                    font-weight: 600;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    width: 12%;
                }
                Text {
                    text: "GIAO D·ªäCH";
                    color: #FFFFFF;
                    font-size: 12px;
                    font-weight: 600;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    width: 12%;
                }
                Text {
                    text: "KL ƒêƒÇNG K√ù";
                    color: #FFFFFF;
                    font-size: 12px;
                    font-weight: 600;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    width: 12%;
                }
                Text {
                    text: "KL TH·ª∞C HI·ªÜN";
                    color: #FFFFFF;
                    font-size: 12px;
                    font-weight: 600;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    width: 12%;
                }
                Text {
                    text: "NG√ÄY ƒêƒÇNG K√ù";
                    color: #FFFFFF;
                    font-size: 12px;
                    font-weight: 600;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    width: 13%;
                }
                Text {
                    text: "NG√ÄY TH·ª∞C HI·ªÜN";
                    color: #FFFFFF;
                    font-size: 12px;
                    font-weight: 600;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    width: 13%;
                }
            }
        }
        
        // Transactions list
        if transactions.length > 0: ListView {
            for transaction[index] in transactions: Rectangle {
                height: 50px;
                background: Math.mod(index, 2) == 0 ? #2a2a2a : #252525;
                border-radius: 8px;
                
                HorizontalLayout {
                    padding: 12px;
                    spacing: 8px;
                    
                    // Name column
                    Text {
                        text: transaction.name;
                        color: #FFFFFF;
                        font-size: 12px;
                        font-weight: 500;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                        width: 12%;
                        wrap: word-wrap;
                    }
                    
                    // Transaction type column with color coding
                    Text {
                        text: transaction.transaction_type;
                        color: transaction.transaction_type == "Mua" ? #00D4AA : 
                              transaction.transaction_type == "B√°n" ? #FF4444 : #FFFFFF;
                        font-size: 12px;
                        font-weight: 600;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                        width: 12%;
                    }
                    
                    // Registered quantity column
                    Text {
                        text: @tr("{} CP", Utils.parse_volume(transaction.registered_quantity));
                        color: #E0E0E0;
                        font-size: 12px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                        width: 12%;
                    }
                    
                    // Executed quantity column
                    Text {
                        text: @tr("{} CP", Utils.parse_volume(transaction.executed_quantity));
                        color: #E0E0E0;
                        font-size: 12px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                        width: 12%;
                    }
                    
                    // Registration date column
                    Text {
                        text: transaction.registration_date;
                        color: #888888;
                        font-size: 11px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                        width: 13%;
                    }
                    
                    // Execution date column
                    Text {
                        text: transaction.execution_date;
                        color: #888888;
                        font-size: 11px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                        width: 13%;
                    }
                }
            }
        }
        
        // Empty state
        if transactions.length == 0: Rectangle {
            height: 200px;
            background: #2a2a2a;
            border-radius: 12px;
            
            VerticalLayout {
                alignment: center;
                spacing: 12px;
                
                Text {
                    text: "üìà";
                    color: #555555;
                    font-size: 32px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
                Text {
                    text: "Kh√¥ng c√≥ d·ªØ li·ªáu giao d·ªãch n·ªôi b·ªô";
                    color: #888888;
                    font-size: 16px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
                Text {
                    text: "Th√¥ng tin giao d·ªãch s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t khi c√≥ d·ªØ li·ªáu m·ªõi";
                    color: #666666;
                    font-size: 12px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
            }
        }
    }
}

export component SubsidiariesList inherits Rectangle {
    in property <[Subsidiary]> subsidiaries;
    in property <string> company_name: "C√îNG TY C·ªî PH·∫¶N KHU C√îNG NGHI·ªÜP K·ª∏ THU·∫¨T CAO AN PH√ÅT 1";
    in property <string> stock_code: "0801298395";
    in property <string> address: "Khu C√¥ng nghi·ªáp k·ªπ thu·∫≠t cao An Ph√°t, Km47, Qu·ªëc l·ªô 5, Ph∆∞·ªùng Vi·ªát H√≤a, Th√†nh ph·ªë H·∫£i D∆∞∆°ng, T·ªânh H·∫£i D∆∞∆°ng, Vi·ªát Nam";
    in property <string> representative: "PH·∫†M VƒÇN TU·∫§N";
    in property <string> activity_date: "2019-09-25";
    in property <string> business_field: "Kinh doanh b·∫•t ƒë·ªông s·∫£n, quy·ªÅn s·ª≠ d·ª•ng ƒë·∫•t thu·ªôc ch·ªß s·ªü h·ªØu, ch·ªß s·ª≠ d·ª•ng ho·∫∑c ƒëi thu√™";
    in property <image> company_logo;
    
    background: #181818;
    
    HorizontalLayout {
        padding: 20px;
        spacing: 20px;
        
        // Left side - Subsidiaries table
        VerticalLayout {
            spacing: 16px;
            width: 60%;
            
            // Header section
            Rectangle {
                height: 50px;
                background: #2a2a2a;
                border-radius: 10px;
                
                HorizontalLayout {
                    padding: 16px;
                    
                    VerticalLayout {
                        Text {
                            text: "T√äN C√îNG TY CON";
                            color: #FFFFFF;
                            font-size: 18px;
                            font-weight: 700;
                            horizontal-alignment: left;
                            vertical-alignment: center;
                        }
                    }
                    
                    Rectangle {} // Spacer
                    
                    Text {
                        text: @tr("{} c√¥ng ty", subsidiaries.length);
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 600;
                        horizontal-alignment: right;
                        vertical-alignment: center;
                    }
                }
            }

            // Subsidiaries list
            if subsidiaries.length > 0: ListView {
                for subsidiary[index] in subsidiaries: Rectangle {
                    height: 60px;
                    background: Math.mod(index, 2) == 0 ? #2a2a2a : #252525;
                    border-radius: 8px;
                    
                    HorizontalLayout {
                        padding: 16px;
                        spacing: 12px;
                        
                        Text {
                            text: subsidiary.name;
                            color: #FFFFFF;
                            font-size: 14px;
                            font-weight: 500;
                            horizontal-alignment: left;
                            vertical-alignment: center;
                            wrap: word-wrap;
                            width: 50%;
                        }
                        
                        Text {
                            text: @tr("{} t·ª∑", Utils.parse_volume(subsidiary.charter_capital));
                            color: #E0E0E0;
                            font-size: 13px;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                            width: 25%;
                        }
                        
                        Text {
                            text: subsidiary.ownership_percent.to-fixed(2) + "%";
                            color: #FFA500;
                            font-size: 13px;
                            font-weight: 600;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                            width: 25%;
                        }
                    }
                }
            }
            
            // Empty state
            if subsidiaries.length == 0: Rectangle {
                height: 200px;
                background: #2a2a2a;
                border-radius: 12px;
                
                VerticalLayout {
                    alignment: center;
                    spacing: 12px;
                    
                    Text {
                        text: "üè¢";
                        color: #555555;
                        font-size: 32px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    Text {
                        text: "Kh√¥ng c√≥ d·ªØ li·ªáu c√¥ng ty con";
                        color: #888888;
                        font-size: 16px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                }
            }
        }
        
        // Right side - Company profile
        VerticalLayout {
            spacing: 16px;
            width: 40%;
            
            // Company logo and basic info
            Rectangle {
                height: 200px;
                background: #2a2a2a;
                border-radius: 12px;
                
                VerticalLayout {
                    padding: 16px;
                    spacing: 12px;
                    
                    // Logo section
                    Rectangle {
                        height: 80px;
                        
                        if company_logo.width > 0: Image {
                            source: company_logo;
                            width: 80px;
                            height: 80px;
                            image-fit: contain;
                            horizontal-alignment: center;
                        }
                        
                        if company_logo.width == 0: Rectangle {
                            width: 80px;
                            height: 80px;
                            background: #404040;
                            border-radius: 8px;
                            
                            HorizontalLayout {
                                alignment: center;
                                Text {
                                    text: "LOGO";
                                    color: #888888;
                                    font-size: 12px;
                                    horizontal-alignment: center;
                                    vertical-alignment: center;
                                }
                            }
                        }
                    }
                    
                    Text {
                        text: company_name;
                        color: #FFFFFF;
                        font-size: 16px;
                        font-weight: 700;
                        wrap: word-wrap;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                }
            }
            
            // Detailed information
            Rectangle {
                background: #2a2a2a;
                border-radius: 12px;
                
                VerticalLayout {
                    padding: 16px;
                    spacing: 12px;
                    
                    Text {
                        text: "QU√Å TR√åNH C√îNG T√ÅC";
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 700;
                        horizontal-alignment: left;
                    }
                    
                    VerticalLayout {
                        spacing: 8px;
                        
                        HorizontalLayout {
                            Text {
                                text: "M√£ s·ªë thu·∫ø:";
                                color: #888888;
                                font-size: 12px;
                                width: 30%;
                            }
                            Text {
                                text: stock_code;
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "ƒê·ªãa ch·ªâ:";
                                color: #888888;
                                font-size: 12px;
                                width: 30%;
                                vertical-alignment: top;
                            }
                            Text {
                                text: address;
                                color: #FFFFFF;
                                font-size: 12px;
                                wrap: word-wrap;
                                vertical-alignment: top;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "Ng∆∞·ªùi ƒë·∫°i di·ªán:";
                                color: #888888;
                                font-size: 12px;
                                width: 30%;
                            }
                            Text {
                                text: representative;
                                color: #FFFFFF;
                                font-size: 12px;
                                font-weight: 600;
                            }
                        }
                        
                        HorizontalLayout {
                            Text {
                                text: "Ng√†y ho·∫°t ƒë·ªông:";
                                color: #888888;
                                font-size: 12px;
                                width: 30%;
                            }
                            Text {
                                text: activity_date;
                                color: #FFFFFF;
                                font-size: 12px;
                            }
                        }
                    }
                    
                    Text {
                        text: "B·∫∞NG C·∫§P, CH·ª®NG CH·ªà, KHEN TH∆Ø·ªûNG, K·ª∂ LU·∫¨T";
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 700;
                        horizontal-alignment: left;
                    }
                    
                    Text {
                        text: "Ng√†nh ngh·ªÅ ch√≠nh: " + business_field;
                        color: #E0E0E0;
                        font-size: 12px;
                        wrap: word-wrap;
                    }
                }
            }
        }
    }
}

export component SharedHolderList inherits Rectangle {
    in property <[SharedHolder]> holders;
    background: #181818;
    
    VerticalLayout {
        padding: 20px;
        spacing: 16px;
        
        // Header section
        Rectangle {
            height: 50px;
            background: #2a2a2a;
            border-radius: 10px;
            
            HorizontalLayout {
                padding: 16px;
                
                VerticalLayout {
                    Text {
                        text: "C·ªî ƒê√îNG L·ªöN";
                        color: #FFFFFF;
                        font-size: 18px;
                        font-weight: 700;
                        horizontal-alignment: left;
                        vertical-alignment: center;
                    }
                }
                
                Rectangle {} // Spacer
                
                VerticalLayout {
                    alignment: end;
                    Text {
                        text: @tr("{} c·ªï ƒë√¥ng", holders.length);
                        color: #00D4AA;
                        font-size: 14px;
                        font-weight: 600;
                        horizontal-alignment: right;
                        vertical-alignment: center;
                    }
                }
            }
        }
        
        // Shareholders list with better spacing
        if holders.length > 0: ListView {
            for holder[index] in holders: Rectangle {
                height: 70px; // Slightly taller for better proportions
                background: Math.mod(index, 2) == 0 ? #2a2a2a : #252525; // Alternating colors
                border-radius: 12px;
                
                HorizontalLayout {
                    padding: 16px;
                    spacing: 20px;
                    
                    // Left section - Shareholder info
                    VerticalLayout {
                        spacing: 4px;
                        
                        Text {
                            text: holder.name;
                            color: #FFFFFF;
                            font-size: 15px;
                            font-weight: 600;
                            horizontal-alignment: left;
                            vertical-alignment: center;
                            wrap: word-wrap;
                        }
                        Text {
                            text: "C·∫≠p nh·∫≠t: " + holder.updated_at;
                            color: #888888;
                            font-size: 12px;
                            horizontal-alignment: left;
                            vertical-alignment: center;
                        }
                    }
                    
                    Rectangle {} // Flexible spacer
                    
                    // Right section - Share information
                    VerticalLayout {
                        alignment: end;
                        spacing: 4px;
                        width: 150px; // Fixed width for alignment
                        
                        Text {
                            text: @tr("{} c·ªï phi·∫øu", Utils.parse_volume(holder.shares));
                            color: #00D4AA;
                            font-size: 14px;
                            font-weight: 600;
                            horizontal-alignment: right;
                            vertical-alignment: center;
                        }
                        Text {
                            text: holder.percent.to-fixed(2) + "%";
                            color: #FFA500;
                            font-size: 13px;
                            font-weight: 500;
                            horizontal-alignment: right;
                            vertical-alignment: center;
                        }
                    }
                }
            }
        }
        
        // Empty state with better styling
        if holders.length == 0: Rectangle {
            height: 200px;
            background: #2a2a2a;
            border-radius: 12px;
            
            VerticalLayout {
                alignment: center;
                spacing: 12px;
                
                Text {
                    text: "üìä";
                    color: #555555;
                    font-size: 32px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
                Text {
                    text: "Kh√¥ng c√≥ d·ªØ li·ªáu c·ªï ƒë√¥ng";
                    color: #888888;
                    font-size: 16px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
                Text {
                    text: "D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t khi c√≥ th√¥ng tin m·ªõi";
                    color: #666666;
                    font-size: 12px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
            }
        }
    }
}

export component SharedHolderItem inherits Rectangle {
    in property <SharedHolder> holder;
    background: #2a2a2a;
    border-radius: 8px;
    height: 60px;
    
    HorizontalLayout {
        padding: 12px;
        spacing: 16px;
        
        // Shareholder name
        VerticalLayout {
            Text {
                text: holder.name;
                color: #FFFFFF;
                font-size: 14px;
                font-weight: 600;
                horizontal-alignment: left;
                vertical-alignment: center;
            }
            Text {
                text: "C·∫≠p nh·∫≠t: " + holder.updated_at;
                color: #888888;
                font-size: 11px;
                horizontal-alignment: left;
                vertical-alignment: center;
            }
        }
        
        Rectangle {} // Spacer
        
        // Share information
        VerticalLayout {
            alignment: end;
            Text {
                text: @tr("{} c·ªï phi·∫øu", holder.shares);
                color: #00D4AA;
                font-size: 13px;
                font-weight: 600;
                horizontal-alignment: right;
                vertical-alignment: center;
            }
            Text {
                text: holder.percent.to-fixed(2) + "%";
                color: #FFA500;
                font-size: 12px;
                horizontal-alignment: right;
                vertical-alignment: center;
            }
        }
    }
}

export component CompanyOverview inherits Rectangle {
    background: #181818;
    in property <image> company-image;
    in property <string> overview: "No overview available.";
    
    HorizontalLayout {
        padding: 16px;
        spacing: 16px;
        
        // Company image on the left
        Rectangle {
            width: 120px;
            height: 120px;
            border-radius: 8px;
            background: #2a2a2a;
            
            if company-image.width > 0: Image {
                source: company-image;
                width: 100%;
                height: 100%;
                image-fit: contain;
            }
            
            if company-image.width == 0: Rectangle {
                background: #404040;
                border-radius: 8px;
                Text {
                    text: "LOGO";
                    color: #888888;
                    font-size: 12px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
            }
        }
        
        // Company overview text on the right
        Rectangle {
            clip: true;
            background: #1a1a1a;
            border-radius: 4px;
            
            ScrollView {
                width: 100%;
                height: 100%;
                
                VerticalLayout {
                    padding: 8px;
                    spacing: 0px;
                    
                    overview-text := Text {
                        text: overview;
                        color: #E0E0E0;
                        font-size: 13px;
                        font-weight: 400;
                        wrap: word-wrap;
                        vertical-alignment: top;
                        horizontal-alignment: left;
                        width: 100%;
                    }
                    
                    // Add some bottom spacing
                    Rectangle {
                        height: 16px;
                    }
                }
            }
        }
    }
}

export component CompanyProfile inherits Rectangle {
    background: #181818;

    in-out property <StockData> stock_data;
    in property <string> company_overview: "";
    in property <[SharedHolder]> shared_holders;
    in property <[Officer]> officers;
    in property <[Subsidiary]> subsidiaries;
    in property <[InsiderTransaction]> insider_transactions;

    VerticalLayout {
        padding: 8px;

        StockHeader {
            stock_data <=> root.stock_data;
            border-radius: 10px;
            height: 150px;
        }
        CompanyOverview {
            min-height: 200px; // Reduced from 150px to 80px
            // company-image: root.stock_data.company_logo; // Bind this when you have company logo data
            overview: root.company_overview != "" ? root.company_overview : 
                     "T·ªïng quan: ƒêang t·∫£i th√¥ng tin c√¥ng ty...";
        }
        Rectangle {
            height: 56px;
            HorizontalLayout {
                shared_holder := TextButton {
                    text: "DANH S√ÅCH C·ªî ƒê√îNG";
                    selected: true;
                    clicked => {
                        officers.selected = false;
                        subsidiaries.selected = false;
                        insider_transaction.selected = false;
                    }
                }
                Rectangle {width: 8px;}
                officers := TextButton {
                    text: "BAN L√ÉNH ƒê·∫†O";
                    clicked => {
                        shared_holder.selected = false;
                        subsidiaries.selected = false;
                        insider_transaction.selected = false;
                    }
                }
                Rectangle {width: 8px;}
                subsidiaries := TextButton {
                    text: "C√îNG TY CON & LI√äN K·∫æT";
                    clicked => {
                        shared_holder.selected = false;
                        officers.selected = false;
                        insider_transaction.selected = false;
                    }
                }
                Rectangle {width: 8px;}
                insider_transaction := TextButton {
                    text: "GIAO D·ªäCH N·ªòI B·ªò";
                    clicked => {
                        shared_holder.selected = false;
                        officers.selected = false;
                        subsidiaries.selected = false;
                    }
                }
                Rectangle {}
                Rectangle {}
                Rectangle {}
                Rectangle {}
                Rectangle {}
                Rectangle {}
            }
        }
        if officers.selected: OfficersList {
            officers: root.officers;
        }
        if shared_holder.selected: SharedHolderList {
            holders: root.shared_holders;
        }
        if subsidiaries.selected: SubsidiariesList {
            subsidiaries: root.subsidiaries;
        }
        if insider_transaction.selected: InsiderTransactionsList {
            transactions: root.insider_transactions;
        }
    }
}
